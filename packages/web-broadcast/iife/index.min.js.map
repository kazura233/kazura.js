{"version":3,"file":"index.min.js","sources":["../src/proxy-iife.ts"],"sourcesContent":["const MESSAGE_TAG: string = 'application/x-web-broadcast-proxy-v1'\n\nconst broadcastPool: Map<string, BroadcastChannel> = new Map()\n\nconst eventHandler = (\n  event: MessageEvent<{\n    tag: string\n    channelName: string\n    data: any\n  }>\n) => {\n  const { data } = event\n  if (typeof data === 'object' && 'tag' in data && data.tag === MESSAGE_TAG) {\n    const { channelName, data: message } = data\n    let broadcast = broadcastPool.get(channelName)\n    if (!broadcast) {\n      broadcast = new BroadcastChannel(channelName)\n      broadcastPool.set(channelName, broadcast)\n    }\n    broadcast.postMessage(message)\n  }\n}\n\nwindow.addEventListener('message', eventHandler)\n"],"names":["broadcastPool","Map","window","addEventListener","event","data","tag","channelName","message","broadcast","get","BroadcastChannel","set","postMessage"],"mappings":"yBAAA,IAEMA,EAA+C,IAAIC,IAqBzDC,OAAOC,iBAAiB,WAnBH,SACnBC,GAMQ,IAAAC,EAASD,EAAKC,KACtB,GAAoB,iBAATA,GAAqB,QAASA,GAZf,yCAYuBA,EAAKC,IAAqB,CACjE,IAAAC,EAA+BF,EAAIE,YAAhBC,EAAYH,EAAIA,KACvCI,EAAYT,EAAcU,IAAIH,GAC7BE,IACHA,EAAY,IAAIE,iBAAiBJ,GACjCP,EAAcY,IAAIL,EAAaE,IAEjCA,EAAUI,YAAYL,EACvB,CACH"}